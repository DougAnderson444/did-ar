import{_ as Y}from"./preload-helper-aa6bc0ce.js";import{S as Z,i as $,s as R,e as w,b as h,f as m,g as v,t as k,d as A,h as p,O as ee,o as x,a0 as te,v as T,w as U,x as W,y as V,q as g,a as j,r as y,c as z,u as K,k as E,l as q,m as L,n as D,F as S,A as I,L as B,X as F,N as le}from"./index-a9922c5c.js";import{R as re,S as ne}from"./base64-2f165bce.js";function M(a,l,r){const e=a.slice();return e[5]=l[r],e}function X(a){let l,r,e=a[0],t=[];for(let i=0;i<e.length;i+=1)t[i]=H(M(a,e,i));const n=i=>k(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();l=w()},l(i){for(let s=0;s<t.length;s+=1)t[s].l(i);l=w()},m(i,s){for(let o=0;o<t.length;o+=1)t[o].m(i,s);h(i,l,s),r=!0},p(i,s){if(s&3){e=i[0];let o;for(o=0;o<e.length;o+=1){const f=M(i,e,o);t[o]?(t[o].p(f,s),m(t[o],1)):(t[o]=H(f),t[o].c(),m(t[o],1),t[o].m(l.parentNode,l))}for(v(),o=e.length;o<t.length;o+=1)n(o);A()}},i(i){if(!r){for(let s=0;s<e.length;s+=1)m(t[s]);r=!0}},o(i){t=t.filter(Boolean);for(let s=0;s<t.length;s+=1)k(t[s]);r=!1},d(i){te(t,i),i&&p(l)}}}function G(a){let l,r;return l=new re({props:{did:a[1](a[5].id),$$slots:{timestamp:[ae],default:[oe]},$$scope:{ctx:a}}}),{c(){T(l.$$.fragment)},l(e){U(l.$$.fragment,e)},m(e,t){W(l,e,t),r=!0},p(e,t){const n={};t&3&&(n.did=e[1](e[5].id)),t&259&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){r||(m(l.$$.fragment,e),r=!0)},o(e){k(l.$$.fragment,e),r=!1},d(e){V(l,e)}}}function oe(a){let l=a[1](a[5].id)+"",r,e;return{c(){r=g(l),e=j()},l(t){r=y(t,l),e=z(t)},m(t,n){h(t,r,n),h(t,e,n)},p(t,n){n&3&&l!==(l=t[1](t[5].id)+"")&&K(r,l)},d(t){t&&p(r),t&&p(e)}}}function ae(a){let l,r=new Date(a[5].timestamp*1e3).toLocaleString()+"",e;return{c(){l=E("div"),e=g(r),this.h()},l(t){l=q(t,"DIV",{slot:!0});var n=L(l);e=y(n,r),n.forEach(p),this.h()},h(){D(l,"slot","timestamp")},m(t,n){h(t,l,n),S(l,e)},p(t,n){n&1&&r!==(r=new Date(t[5].timestamp*1e3).toLocaleString()+"")&&K(e,r)},d(t){t&&p(l)}}}function H(a){let l,r,e=a[1]&&a[5].id&&G(a);return{c(){e&&e.c(),l=w()},l(t){e&&e.l(t),l=w()},m(t,n){e&&e.m(t,n),h(t,l,n),r=!0},p(t,n){t[1]&&t[5].id?e?(e.p(t,n),n&3&&m(e,1)):(e=G(t),e.c(),m(e,1),e.m(l.parentNode,l)):e&&(v(),k(e,1,1,()=>{e=null}),A())},i(t){r||(m(e),r=!0)},o(t){k(e),r=!1},d(t){e&&e.d(t),t&&p(l)}}}function ie(a){let l,r,e=a[0]&&X(a);return{c(){e&&e.c(),l=w()},l(t){e&&e.l(t),l=w()},m(t,n){e&&e.m(t,n),h(t,l,n),r=!0},p(t,[n]){t[0]?e?(e.p(t,n),n&1&&m(e,1)):(e=X(t),e.c(),m(e,1),e.m(l.parentNode,l)):e&&(v(),k(e,1,1,()=>{e=null}),A())},i(t){r||(m(e),r=!0)},o(t){k(e),r=!1},d(t){e&&e.d(t),t&&p(l)}}}function se(a,l,r){let{ownerAddress:e}=l,{local:t=!1}=l;const n=ee();let i,s;return x(async()=>{console.log("Looking for DID contracts...",new Date().toLocaleTimeString()),r(1,s=_=>t?`did:arlocal:${_}`:`did:ar:${_}`);let o=await Y(()=>import("./index-07ab447c.js").then(_=>_.i),["index-07ab447c.js","base64-2f165bce.js","..\\assets\\base64-947b612f.css","preload-helper-aa6bc0ce.js","index-a9922c5c.js","index-40d6f499.js"],import.meta.url);o!=null&&o.default&&(o=o.default),o!=null&&o.default&&(o=o.default);let f=o.init({host:"arweave.net",port:443,protocol:"https",timeout:2e4,logging:!1});f.arql({op:"and",expr1:{op:"equals",expr1:"App-Name",expr2:"SmartWeaveContract"},expr2:{op:"equals",expr1:"Uploader-Contract-Owner",expr2:e},expr3:{op:"equals",expr1:"Content-Type",expr2:"application/json"},expr4:{op:"equals",expr1:"DID-AR",expr2:"true"}}).then(async _=>{console.log("txIds",_);const c=`query {
								transactions(ids: ["${_.join('","')}"]) {
									edges {
										node {
											block {
												timestamp
											}
											tags {
												name
												value
											}
										}
									}
								}
							}`,u=await f.api.post("graphql",{query:c},{headers:{"content-type":"application/json"}});r(0,i=u.data.data.transactions.edges.map(d=>{var b,N;return{id:d.node.tags.find(P=>P.name==="Uploader-Tx-Id").value,timestamp:new Date(((N=(b=d.node)==null?void 0:b.block)==null?void 0:N.timestamp)*1e3).toLocaleString()||null}})),n("searchComplete",i)})}),a.$$set=o=>{"ownerAddress"in o&&r(2,e=o.ownerAddress),"local"in o&&r(3,t=o.local)},[i,s,e,t]}class ce extends Z{constructor(l){super(),$(this,l,se,ie,R,{ownerAddress:2,local:3})}}function fe(a){let l;return{c(){l=g("Connect with Wallet to create a Decentralized Identity")},l(r){l=y(r,"Connect with Wallet to create a Decentralized Identity")},m(r,e){h(r,l,e)},p:I,i:I,o:I,d(r){r&&p(l)}}}function ue(a){let l=a[0],r,e,t=Q(a);return{c(){t.c(),r=w()},l(n){t.l(n),r=w()},m(n,i){t.m(n,i),h(n,r,i),e=!0},p(n,i){i&1&&R(l,l=n[0])?(v(),k(t,1,1,I),A(),t=Q(n),t.c(),m(t,1),t.m(r.parentNode,r)):t.p(n,i)},i(n){e||(m(t),e=!0)},o(n){k(t),e=!1},d(n){n&&p(r),t.d(n)}}}function J(a){let l,r;return l=new ce({props:{ownerAddress:a[7]}}),l.$on("searchComplete",a[9]),{c(){T(l.$$.fragment)},l(e){U(l.$$.fragment,e)},m(e,t){W(l,e,t),r=!0},p(e,t){const n={};t&128&&(n.ownerAddress=e[7]),l.$set(n)},i(e){r||(m(l.$$.fragment,e),r=!0)},o(e){k(l.$$.fragment,e),r=!1},d(e){V(l,e)}}}function _e(a){let l,r;return l=new ne({props:{$$slots:{default:[de]},$$scope:{ctx:a}}}),{c(){T(l.$$.fragment)},l(e){U(l.$$.fragment,e)},m(e,t){W(l,e,t),r=!0},p(e,t){const n={};t&4096&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){r||(m(l.$$.fragment,e),r=!0)},o(e){k(l.$$.fragment,e),r=!1},d(e){V(l,e)}}}function pe(a){let l,r,e,t,n=a[4]?"local":"production",i,s,o;function f(u,d){return u[1]?he:me}let _=f(a),c=_(a);return{c(){l=E("div"),c.c(),r=j(),e=E("div"),t=g("Use wallet keys to Create new Decentralized Identity, deployed on "),i=g(n),this.h()},l(u){l=q(u,"DIV",{class:!0});var d=L(l);c.l(d),d.forEach(p),r=z(u),e=q(u,"DIV",{class:!0});var C=L(e);t=y(C,"Use wallet keys to Create new Decentralized Identity, deployed on "),i=y(C,n),C.forEach(p),this.h()},h(){D(l,"class","m-4 p-4"),D(e,"class","bg-blue-600 hover:bg-blue-500 shadow rounded-lg m-4 p-4 w-fit text-white cursor-pointer")},m(u,d){h(u,l,d),c.m(l,null),h(u,r,d),h(u,e,d),S(e,t),S(e,i),s||(o=[B(e,"click",function(){F(a[8])&&a[8].apply(this,arguments)}),B(e,"keypress",function(){F(a[8])&&a[8].apply(this,arguments)})],s=!0)},p(u,d){a=u,_===(_=f(a))&&c?c.p(a,d):(c.d(1),c=_(a),c&&(c.c(),c.m(l,null))),d&16&&n!==(n=a[4]?"local":"production")&&K(i,n)},i:I,o:I,d(u){u&&p(l),c.d(),u&&p(r),u&&p(e),s=!1,le(o)}}}function de(a){let l;return{c(){l=g("Creating DID...")},l(r){l=y(r,"Creating DID...")},m(r,e){h(r,l,e)},d(r){r&&p(l)}}}function me(a){let l;return{c(){l=g("We will deploy a new Smart Contract to manage your DID.")},l(r){l=y(r,"We will deploy a new Smart Contract to manage your DID.")},m(r,e){h(r,l,e)},p:I,d(r){r&&p(l)}}}function he(a){let l,r,e,t,n,i;return{c(){l=g("Using existing contract "),r=E("span"),e=E("a"),t=g(a[1]),n=g("\u{1F517}\u2197\uFE0F"),this.h()},l(s){l=y(s,"Using existing contract "),r=q(s,"SPAN",{class:!0});var o=L(r);e=q(o,"A",{href:!0,target:!0,rel:!0});var f=L(e);t=y(f,a[1]),n=y(f,"\u{1F517}\u2197\uFE0F"),f.forEach(p),o.forEach(p),this.h()},h(){D(e,"href",i="https://sonar.warp.cc/#/app/source/"+a[1]+"#code"),D(e,"target","_blank"),D(e,"rel","noopener noreferrer"),D(r,"class","font-mono bg-gray-50 m-2 p-2 rounded")},m(s,o){h(s,l,o),h(s,r,o),S(r,e),S(e,t),S(e,n)},p(s,o){o&2&&K(t,s[1]),o&2&&i!==(i="https://sonar.warp.cc/#/app/source/"+s[1]+"#code")&&D(e,"href",i)},d(s){s&&p(l),s&&p(r)}}}function Q(a){let l=a[3],r,e,t,n,i,s=J(a);const o=[pe,_e],f=[];function _(c,u){return!c[6]&&!c[5]&&c[8]?0:c[6]?1:-1}return~(e=_(a))&&(t=f[e]=o[e](a)),{c(){s.c(),r=j(),t&&t.c(),n=w()},l(c){s.l(c),r=z(c),t&&t.l(c),n=w()},m(c,u){s.m(c,u),h(c,r,u),~e&&f[e].m(c,u),h(c,n,u),i=!0},p(c,u){u&8&&R(l,l=c[3])?(v(),k(s,1,1,I),A(),s=J(c),s.c(),m(s,1),s.m(r.parentNode,r)):s.p(c,u);let d=e;e=_(c),e===d?~e&&f[e].p(c,u):(t&&(v(),k(f[d],1,1,()=>{f[d]=null}),A()),~e?(t=f[e],t?t.p(c,u):(t=f[e]=o[e](c),t.c()),m(t,1),t.m(n.parentNode,n)):t=null)},i(c){i||(m(s),m(t),i=!0)},o(c){k(s),k(t),i=!1},d(c){s.d(c),c&&p(r),~e&&f[e].d(c),c&&p(n)}}}function ke(a){let l,r,e,t;const n=[ue,fe],i=[];function s(o,f){return o[0]&&o[2]&&o[7]?0:1}return l=s(a),r=i[l]=n[l](a),{c(){r.c(),e=w()},l(o){r.l(o),e=w()},m(o,f){i[l].m(o,f),h(o,e,f),t=!0},p(o,[f]){let _=l;l=s(o),l===_?i[l].p(o,f):(v(),k(i[_],1,1,()=>{i[_]=null}),A(),r=i[l],r?r.p(o,f):(r=i[l]=n[l](o),r.c()),m(r,1),r.m(e.parentNode,e))},i(o){t||(m(r),t=!0)},o(o){k(r),t=!1},d(o){i[l].d(o),o&&p(e)}}}function be(a,l,r){let{RSAPublicKey:e}=l,{Ed25519PublicKey:t}=l,{wallet:n}=l,{srcTx:i}=l,s,o,f=!1,_=!1,c=!1,u,d;x(async()=>{const b=new URLSearchParams(window.location.search);r(4,f=b.get("local")==="true");const{init:N}=await Y(()=>import("./didar-53656908.js"),["didar-53656908.js","preload-helper-aa6bc0ce.js","base64-2f165bce.js","..\\assets\\base64-947b612f.css","index-a9922c5c.js","index-40d6f499.js"],import.meta.url);if(r(2,s=await N({local:f})),f){const{jwk:P,address:O}=await s.warp.testing.generateWallet();r(2,s.wallet=P,s),r(7,u=O),console.log("test address",O)}r(8,d=async function(){r(6,c=!0),r(3,o=await s.create({RSAPublicKey:e,Ed25519PublicKey:t,srcTx:i}));const P=setInterval(async()=>{r(7,u),r(0,n),_&&(clearInterval(P),r(6,c=!1))},400)})});async function C(b){console.log("searchComplete",b.detail),r(5,_=b.detail.length)}return a.$$set=b=>{"RSAPublicKey"in b&&r(10,e=b.RSAPublicKey),"Ed25519PublicKey"in b&&r(11,t=b.Ed25519PublicKey),"wallet"in b&&r(0,n=b.wallet),"srcTx"in b&&r(1,i=b.srcTx)},a.$$.update=()=>{a.$$.dirty&1&&n&&(async()=>r(7,u=await n.arweaveWalletAPI.getActiveAddress()))()},[n,i,s,o,f,_,c,u,d,C,e,t]}class De extends Z{constructor(l){super(),$(this,l,be,ke,R,{RSAPublicKey:10,Ed25519PublicKey:11,wallet:0,srcTx:1})}}export{De as D};
//# sourceMappingURL=DIDAr-1e9468f1.js.map
